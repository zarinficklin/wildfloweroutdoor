(function(a){var b={navigate:function(b,c,d,e,f){var g=e.scroll,h=1,i=0;if(f.expanded){g=1;h=3;i=f.idxClicked}if(b===1){d.find("div.ca-item:lt("+g+")").each(function(b){a(this).clone(true).css("left",(f.totalItems-i+b)*f.itemW*h+"px").appendTo(d)})}else{var j=d.children().eq(0);d.find("div.ca-item:gt("+(f.totalItems-1-g)+")").each(function(b){a(this).clone(true).css("left",-(g-b+i)*f.itemW*h+"px").insertBefore(j)})}d.find("div.ca-item").each(function(c){var d=a(this);d.stop().animate({left:b===1?"-="+f.itemW*h*g+"px":"+="+f.itemW*h*g+"px"},e.sliderSpeed,e.sliderEasing,function(){if(b===1&&d.position().left<-i*f.itemW*h||b===-1&&d.position().left>(f.totalItems-1-i)*f.itemW*h){d.remove()}f.isAnimating=false})})},openItem:function(a,c,d,e){e.idxClicked=c.index();e.winpos=b.getWinPos(c.position().left,e);a.find("div.ca-item").not(c).hide();c.find("div.ca-content-wrapper").css("left",e.itemW+"px").stop().animate({width:e.itemW*2+"px",left:e.itemW+"px"},d.itemSpeed,d.itemEasing).end().stop().animate({left:"0px"},d.itemSpeed,d.itemEasing,function(){e.isAnimating=false;e.expanded=true;b.openItems(a,c,d,e)})},openItems:function(c,d,e,f){var g=d.index();c.find("div.ca-item").each(function(c){var d=a(this),e=d.index();if(e!==g){d.css("left",-(g-e)*f.itemW*3+"px").show().find("div.ca-content-wrapper").css({left:f.itemW+"px",width:f.itemW*2+"px"});b.toggleMore(d,false)}})},toggleMore:function(a,b){if(b){a.find("a.ca-more").show();a.find("h3").show();a.find(".thumbnails").hide()}else{a.find("a.ca-more").hide();a.find("h3").hide();a.find(".thumbnails").show()}},closeItems:function(c,d,e,f){var g=d.index();d.find("div.ca-content-wrapper").stop().animate({width:"0px"},e.itemSpeed,e.itemEasing).end().stop().animate({left:f.itemW*(f.winpos-1)+"px"},e.itemSpeed,e.itemEasing,function(){f.isAnimating=false;f.expanded=false});b.toggleMore(d,true);c.find("div.ca-item").each(function(c){var d=a(this),e=d.index();if(e!==g){d.find("div.ca-content-wrapper").css({width:"0px"}).end().css("left",(f.winpos-1-(g-e))*f.itemW+"px").show();b.toggleMore(d,true)}})},getWinPos:function(a,b){switch(a){case 0:return 1;break;case b.itemW:return 2;break;case b.itemW*2:return 3;break}}},c={init:function(c){if(this.length){var d={sliderSpeed:500,sliderEasing:"easeOutExpo",itemSpeed:500,itemEasing:"easeOutExpo",scroll:1};return this.each(function(){if(c){a.extend(d,c)}var e=a(this),f=e.find("div.ca-wrapper"),g=f.children("div.ca-item"),h={};h.itemW=g.width();h.totalItems=g.length;if(h.totalItems>3)e.prepend('<div class="ca-nav"><span class="ca-nav-prev">Previous</span><span class="ca-nav-next">Next</span></div>');if(d.scroll<1)d.scroll=1;else if(d.scroll>3)d.scroll=3;var i=e.find("span.ca-nav-prev"),j=e.find("span.ca-nav-next");f.css("overflow","hidden");g.each(function(b){a(this).css({position:"absolute",left:b*h.itemW+"px"})});e.find("a.ca-more").live("click.contentcarousel",function(c){if(h.isAnimating)return false;h.isAnimating=true;var e=a(this).closest("div.ca-item");b.toggleMore(e,false);b.openItem(f,e,d,h);return false});e.find("a.ca-close").live("click.contentcarousel",function(c){if(h.isAnimating)return false;h.isAnimating=true;var e=a(this).closest("div.ca-item");b.closeItems(f,e,d,h);return false});i.bind("click.contentcarousel",function(a){if(h.isAnimating)return false;h.isAnimating=true;b.navigate(-1,e,f,d,h)});j.bind("click.contentcarousel",function(a){if(h.isAnimating)return false;h.isAnimating=true;b.navigate(1,e,f,d,h)});e.bind("mousewheel.contentcarousel",function(a,c){if(c>0){if(h.isAnimating)return false;h.isAnimating=true;b.navigate(-1,e,f,d,h)}else{if(h.isAnimating)return false;h.isAnimating=true;b.navigate(1,e,f,d,h)}return false});a(this).find(".thumbnails").jcarousel({scroll:1,initCallback:function(a){a.clip.css("width","269")}});if(d.autoplay>0){setInterval(function(){if(h.isAnimating||h.isHovering||h.expanded)return false;h.isAnimating=true;b.navigate(1,e,f,d,h)},d.autoplay)}a(this).hover(function(){h.isHovering=true},function(){h.isHovering=false})})}}};a.fn.contentcarousel=function(b){if(c[b]){return c[b].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof b==="object"||!b){return c.init.apply(this,arguments)}else{a.error("Method "+b+" does not exist on jQuery.contentcarousel")}}})(jQuery)